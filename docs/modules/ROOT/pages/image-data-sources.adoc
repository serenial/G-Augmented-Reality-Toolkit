= Image Data Sources
: description : Image Data Sources provide a means of loading or copying other images types or sources into a G Augmented Reality Toolkit Image
: keywords : file I/O, copy, pixmap
:figure-caption!:

Any application which works with images is going to require images to start with - so that seems like a good place to start with discussing this toolkit's functionality. 

A primary application for this toolkit is taking a feed from a webcam or similar video device - this topic will be covered in the section #TODO. For now lets look at other sources of image data.

== New Image.vi

`New Image.vi` can be used to create images with a given size and starting value or it can create a new image based on an image data array.

[cols="1,.>1"]
|===
a| .Preallocate with size and value 
image::image-sources-new-prealloc.png[]
a| .Copy image data array
image::image-sources-new-array.png[]
|===

By default `New Image.vi` will create an empty image which can be used with VIs in this toolkit that expect a destination image to be provided.

== Read Image File.vi

.Read an Image File into an ARGB image
image::image-sources-read-file.png[]

`Read Image File.vi` can load images from a file location as either an `ARGB` or `Greyscale` image. Support for different image file types https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2[is based on by OpenCV's image-codecs] and includes `.png` and '.jpeg' types.

== Copy.vi (Image to Image)

.Copy some parts of an image (specified by a mask-image) to another image
image::image-sources-copy-mask.png[]

`Copy.vi` allows for some or all of a source image to be copied to a destination image. The pixels to copy are specified via masks. The desination should be preallocated if using a mask but if all of the source image is being copied (i.e. no mask is used) then the destination will be resized to accommodate the source image.

== Copy Array to Image.vi

.Copy an array of RGB pixles to an ARGB image
image::image-sources-copy-array.png[]

`Copy Array to Image.vi` can copy either 2D ARGB or Greyscale arrays into a destination image as well as 3D arrays of RGB pixels. The destination image will be resized to accommodate the array data.

== Copy Pixmap to Image.vi

.Copying a Pixmap created from a 3D Picture Control to an Image
image::image-sources-copy-pixmap.png[]

`Copy Pixmap to Image.vi` copies a `Flattened Pixmap` to either an ARGB or Greyscale image. `Pixmap` mask data is either applied to the copy or can be copied to a separate mask destiantion. The destination image (and destination mask if used) will be sized to accommodate the `Pixmap` image.

Only 32, 24 and 8 bit depth `Pixmaps` are supported.

== Copy Memory Address to Image.vi

.Copy an RGB (U32) IMAQ Image using IMAQ's Map/Unmap Pixel Pointer
image::image-sources-copy-memory-address.png[]

`Copy Memory Address to Image.vi` allows for data at a memory address such as a pointer to an array buffer to be copied into a destination image. The destination image will be resized to accommodate the image specified by the size information.

This functionality allows for interoperability with other libraries and toolkits such as `NI-IMAQ`. This example code uses the `NI-IMAQ` function `GetImagePixelPtr.vi` to get the address of the `IMAQ` image data and its memory layout for use with this VI.